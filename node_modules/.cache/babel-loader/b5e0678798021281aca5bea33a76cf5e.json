{"ast":null,"code":"import init, { bls_init, bls_verify } from '../vendor/bls/bls';\nexport let verify;\n/**\n *\n * @param pk primary key: Uint8Array\n * @param sig signature: Uint8Array\n * @param msg message: Uint8Array\n * @returns Promise resolving a boolean\n */\n\nexport async function blsVerify(pk, sig, msg) {\n  if (!verify) {\n    await init();\n\n    if (bls_init() !== 0) {\n      throw new Error('Cannot initialize BLS');\n    }\n\n    verify = (pk1, sig1, msg1) => {\n      // Reorder things from what the WASM expects (sig, m, w).\n      return bls_verify(sig1, msg1, pk1) === 0;\n    };\n  }\n\n  return verify(pk, sig, msg);\n}","map":{"version":3,"sources":["../../../src/utils/bls.ts"],"names":[],"mappings":"AAAA,OAAO,IAAP,IAAe,QAAf,EAAyB,UAAzB,QAA2C,mBAA3C;AAEA,OAAO,IAAI,MAAJ;AAEP;;;;;;AAMG;;AACH,OAAO,eAAe,SAAf,CACL,EADK,EAEL,GAFK,EAGL,GAHK,EAGU;AAEf,MAAI,CAAC,MAAL,EAAa;AACX,UAAM,IAAI,EAAV;;AACA,QAAI,QAAQ,OAAO,CAAnB,EAAsB;AACpB,YAAM,IAAI,KAAJ,CAAU,uBAAV,CAAN;AACD;;AACD,IAAA,MAAM,GAAG,CAAC,GAAD,EAAM,IAAN,EAAY,IAAZ,KAAoB;AAC3B;AACA,aAAO,UAAU,CAAC,IAAD,EAAO,IAAP,EAAa,GAAb,CAAV,KAAgC,CAAvC;AACD,KAHD;AAID;;AACD,SAAO,MAAM,CAAC,EAAD,EAAK,GAAL,EAAU,GAAV,CAAb;AACD","sourceRoot":"","sourcesContent":["import init, { bls_init, bls_verify } from '../vendor/bls/bls';\nexport let verify;\n/**\n *\n * @param pk primary key: Uint8Array\n * @param sig signature: Uint8Array\n * @param msg message: Uint8Array\n * @returns Promise resolving a boolean\n */\nexport async function blsVerify(pk, sig, msg) {\n    if (!verify) {\n        await init();\n        if (bls_init() !== 0) {\n            throw new Error('Cannot initialize BLS');\n        }\n        verify = (pk1, sig1, msg1) => {\n            // Reorder things from what the WASM expects (sig, m, w).\n            return bls_verify(sig1, msg1, pk1) === 0;\n        };\n    }\n    return verify(pk, sig, msg);\n}\n//# sourceMappingURL=bls.js.map"]},"metadata":{},"sourceType":"module"}