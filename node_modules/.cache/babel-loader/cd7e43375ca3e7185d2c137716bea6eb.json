{"ast":null,"code":"/**\n * Hashes a string to a number. Algorithm can be found here:\n * https://caml.inria.fr/pub/papers/garrigue-polymorphic_variants-ml98.pdf\n * @param s\n */\nfunction idlHash(s) {\n  const utf8encoder = new TextEncoder();\n  const array = utf8encoder.encode(s);\n  let h = 0;\n\n  for (const c of array) {\n    h = (h * 223 + c) % 2 ** 32;\n  }\n\n  return h;\n}\n/**\n *\n * @param label string\n * @returns number representing hashed label\n */\n\n\nexport function idlLabelToId(label) {\n  if (/^_\\d+_$/.test(label) || /^_0x[0-9a-fA-F]+_$/.test(label)) {\n    const num = +label.slice(1, -1);\n\n    if (Number.isSafeInteger(num) && num >= 0 && num < 2 ** 32) {\n      return num;\n    }\n  }\n\n  return idlHash(label);\n}","map":{"version":3,"sources":["../../../src/utils/hash.ts"],"names":[],"mappings":"AAAA;;;;AAIG;AACH,SAAS,OAAT,CAAiB,CAAjB,EAA0B;AACxB,QAAM,WAAW,GAAG,IAAI,WAAJ,EAApB;AACA,QAAM,KAAK,GAAG,WAAW,CAAC,MAAZ,CAAmB,CAAnB,CAAd;AAEA,MAAI,CAAC,GAAG,CAAR;;AACA,OAAK,MAAM,CAAX,IAAgB,KAAhB,EAAuB;AACrB,IAAA,CAAC,GAAG,CAAC,CAAC,GAAG,GAAJ,GAAU,CAAX,IAAgB,KAAK,EAAzB;AACD;;AACD,SAAO,CAAP;AACD;AAED;;;;AAIG;;;AACH,OAAM,SAAU,YAAV,CAAuB,KAAvB,EAAoC;AACxC,MAAI,UAAU,IAAV,CAAe,KAAf,KAAyB,qBAAqB,IAArB,CAA0B,KAA1B,CAA7B,EAA+D;AAC7D,UAAM,GAAG,GAAG,CAAC,KAAK,CAAC,KAAN,CAAY,CAAZ,EAAe,CAAC,CAAhB,CAAb;;AACA,QAAI,MAAM,CAAC,aAAP,CAAqB,GAArB,KAA6B,GAAG,IAAI,CAApC,IAAyC,GAAG,GAAG,KAAK,EAAxD,EAA4D;AAC1D,aAAO,GAAP;AACD;AACF;;AACD,SAAO,OAAO,CAAC,KAAD,CAAd;AACD","sourceRoot":"","sourcesContent":["/**\n * Hashes a string to a number. Algorithm can be found here:\n * https://caml.inria.fr/pub/papers/garrigue-polymorphic_variants-ml98.pdf\n * @param s\n */\nfunction idlHash(s) {\n    const utf8encoder = new TextEncoder();\n    const array = utf8encoder.encode(s);\n    let h = 0;\n    for (const c of array) {\n        h = (h * 223 + c) % 2 ** 32;\n    }\n    return h;\n}\n/**\n *\n * @param label string\n * @returns number representing hashed label\n */\nexport function idlLabelToId(label) {\n    if (/^_\\d+_$/.test(label) || /^_0x[0-9a-fA-F]+_$/.test(label)) {\n        const num = +label.slice(1, -1);\n        if (Number.isSafeInteger(num) && num >= 0 && num < 2 ** 32) {\n            return num;\n        }\n    }\n    return idlHash(label);\n}\n//# sourceMappingURL=hash.js.map"]},"metadata":{},"sourceType":"module"}